<!DOCTYPE html>
<html
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorate="~{layout.html}"
>
  <head>
    <title>QuizzesSystem</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  </head>
  <body>
    <div layout:fragment="content" class="container">
      <h2>Quizzes</h2>
      <table class="table table-striped" border="1">
        <thead>
          <tr>
            <th>Name</th>
            <th>Description</th>
            <th>Published</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr th:each="quiz : ${quizzes}">
            <td th:text="${quiz.quizName}"></td>
            <td th:text="${quiz.quizDescription}"></td>
            <td>
              <span
                th:class="${quiz.published} ? 'badge bg-primary' : 'badge bg-secondary'"
              >
                <span th:text="${quiz.publishedDisplay}"></span>
              </span>
            </td>
            <td>
              <a
                th:href="@{'/editQuiz/' + ${quiz.id}}"
                class="btn btn-secondary"
                >Edit</a
              >
              <a
                th:href="@{/delete/{id}(id=${quiz.id})}"
                th:attr="data-id=${quiz.id}"
                th:onclick="'return confirmDelete(this);'"
                class="btn btn-danger"
                >Delete</a
              >
            </td>
          </tr>
        </tbody>
      </table>

      <a href="/addQuiz" class="btn btn-primary">Add a quiz</a>
    </div>

    <script th:inline="javascript">
      function confirmDelete(element) {
        let quizId = element.getAttribute("data-id");
        let confirmation = confirm(
          "Are you sure you want to delete this quiz?"
        );
        if (confirmation) {
          window.location.href = "/delete/" + quizId;
        }
        return false;
      }
    </script>
  </body>
</html>
